<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>ID Card Generator</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f2f2f2; text-align: center; }
    form { background: white; padding: 20px; margin: 30px auto; width: 380px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.08); }
    input, textarea { width: 90%; padding: 10px; margin: 8px 0; border-radius: 6px; border: 1px solid #ccc; font-size: 14px; }
    button { background: #007bff; color: white; padding: 12px; border: none; border-radius: 6px; cursor: pointer; font-size: 16px; }
    button:hover { background: #0056b3; }
    .bg-preview { display:flex; flex-wrap:wrap; justify-content:center; margin:12px 0; }
    .bg-preview img { width:80px; height:100px; margin:6px; border-radius:6px; border:2px solid #ccc; cursor:pointer; object-fit:cover; transition: .15s; }
    .bg-preview img.selected { border:3px solid #007bff; transform: scale(1.03); }
  </style>
  <script>
    function selectBg(name, el) {
      document.getElementById('bg_name').value = name;
      document.querySelectorAll('.bg-preview img').forEach(i => i.classList.remove('selected'));
      el.classList.add('selected');
    }

    window.addEventListener('DOMContentLoaded', () => {
      const first = document.querySelector('.bg-preview img');
      if (first) {
        first.classList.add('selected');
        document.getElementById('bg_name').value = first.getAttribute('data-name');
      }
    });
  </script>
</head>
<body>
  <h2>Company ID Card Generator</h2>
  <form action="/generate" method="POST" enctype="multipart/form-data">
    <input type="text" name="company" placeholder="Company Name" required>
    <input type="text" name="name" placeholder="Employee Name" required>
    <input type="text" name="phone" placeholder="Phone Number" required>
    <input type="text" name="blood" placeholder="Blood Group" required>
    <textarea name="address" placeholder="Address" rows="3" required></textarea>
    <input type="text" name="id_no" placeholder="ID Number" required>
    <input type="file" name="photo" accept="image/*" required>

    <h4>Select Background</h4>
    <div class="bg-preview">
      {% for bg in bg_files %}
        <img src="{{ url_for('static', filename='backgrounds/' + bg) }}" data-name="{{ bg }}" onclick="selectBg('{{ bg }}', this)">
      {% endfor %}
    </div>
    <input type="hidden" id="bg_name" name="bg_name" value="{{ bg_files[0] if bg_files else '' }}">

    <button type="submit">Generate ID Card</button>
  </form>
</body>
</html>
